<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">
  <title></title>
  
<!-- CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/saira-extra-condensed@4.5.0/index.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/open-sans@4.5.0/index.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.13.0/devicon.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
<link rel="stylesheet" href="https://blueeemoon.github.io/bluemoon/main.css">

  
<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>


<script src="https://blueeemoon.github.io/bluemoon/elasticlunr.min.js" defer></script>

<script src="https://blueeemoon.github.io/bluemoon/search_index.en.js" defer></script>




  
  
<!-- RSS -->

    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blueeemoon.github.io/bluemoon/rss.xml">
    


  

  
  
</head>

<body>
  <aside id="sidebar" class="menu is-hidden-touch">
    

<div style="display:block;margin:auto auto 0;padding:.5rem">
    <figure class="image">
        <img id="avatar" class="is-rounded" src="https://blueeemoon.github.io/bluemoon/media/avatar.png">
    </figure>
</div>


    
<ul id="menu" class="menu-list">
    

<li data-menuanchor="about"><a href="https://blueeemoon.github.io/bluemoon/#anchor_about">ACERCA DE MI</a></li>   


<li data-menuanchor="bitcoin"><a href="https://blueeemoon.github.io/bluemoon/#anchor_bitcoin">BITCOIN</a></li>   


<li data-menuanchor="lightning"><a href="https://blueeemoon.github.io/bluemoon/#anchor_lightning">LIGHTNING</a></li>   


<li data-menuanchor="recursos"><a href="https://blueeemoon.github.io/bluemoon/#anchor_recursos">RECURSOS</a></li>   


<li data-menuanchor="publications"><a href="https://blueeemoon.github.io/bluemoon/#anchor_publications">PUBLICACIONES</a></li>

 
<li data-menuanchor="blog"><a href="https://blueeemoon.github.io/bluemoon/#anchor_blog">BLOG</a></li>    

</ul>

  </aside>
  
<div class="modal" id="copyTarget">
  <div class="modal-background"></div>
  <div class="modal-card">
    <section class="modal-card-body">
      <textarea class="textarea" id="bibtex-content" placeholder="e.g. Hello world"  readonly></textarea>
    </section>
    <footer class="modal-card-foot">
      <button class="button" id="copyButton">Copy to clipboard</button>
    </footer>
  </div>
</div>

  <div id="content">
    <!-- Content -->
    
<div class="container is-fluid" style="min-height: 100vh;">
  <div class="is-flex is-flex-direction-column is-justify-content-center" style="min-height: 100vh;">
    <h2>Conceptos clave.<a href="https:&#x2F;&#x2F;bitcoin.org" style="font-style: initial;" ><span class="tag is-warning">Link</span></a></h2>
    
    <div class="content pb-5">
      <hr />
<p>Veremos algunas definiciones que considero importantes comprender para poder comenzar con <strong>Bitcoin</strong>. Las definiciones más específicas y técnicas las puedes encontrar en el siguiente <a href="https://bitcoinops.org/en/topics/">enlace</a>.
Para comenzar existen algunas definiciones que son indispensables conocer. Cuando comiences a utilizar <strong>Bitcoin</strong> necesitarás una Wallet, la cual generará una dirección, alguien que te envie <strong>bitcoin</strong> o adquirirlos, con estos puntos importantes podemos aprender otros más.</p>
<hr />
<h3 id="bitcoin-y-bitcoin">Bitcoin y bitcoin.</h3>
<p>Cuando estamos hablando del protocolo como tal usamos la letra mayúscula al inicio de la palabra <strong>Bitcoin</strong> y si estamos hablando de la moneda, usamos la palabra con minúscula al inicio <strong>bitcoin</strong>.</p>
<blockquote>
<p>"La unidad monetaria se llama bitcoin con b minúscula, y el sistema se llama Bitcoin, con B mayúscula."
<strong>Mastering Bitcoin</strong>. Autor: <a href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch01_intro.adoc#:~:text=Tip,capital%20B.">Andreas M. Antonopoulos, David A. Harding</a></p>
</blockquote>
<p>Ahora que ya podemos diferenciar una de otra veamos lo que tenemos pendiente con el primer párrafo. Si vas a adquirir <strong>bitcoin</strong> necesitarás una dirección.</p>
<hr />
<h3 id="que-es-una-direccion">¿Qué es una dirección?</h3>
<p>Una dirección en el protocolo de <strong>Bitcoin</strong> es una cadena alfanumérica que ha pasado por un proceso computacional para ser creada. Es como un número de cuenta donde puedes recibir <strong>bitcoin</strong> y se ve así:</p>
<p><code>bc1pp7w6kxpj5lzgm28pmuhezwl0vjdlcrthqukll5gn9xuqfq1n673smy8m67</code></p>
<p>Esta dirección es un identificador que dentro del protocolo de <strong>Bitcoin</strong> es una <strong>llave pública</strong>. Veremos esto más adelante. Ahora te preguntarás: ¿cómo gastar esos <strong>bitcoin</strong>?, vamos al apartado siguiente.</p>
<hr />
<h3 id="llave-privada-y-llave-privada">Llave privada y llave privada.</h3>
<p>Ya que tenemos nuestra número de cuenta (dirección), necesitaremos algo así como una contraseña para desbloquear ese <strong>bitcoin</strong> que nos han enviado. Esa contraseña es una <strong>llave privada</strong>. ¡Qué maravilloso, hemos llegado a los conceptos de <strong>llaves privadas</strong> y <strong>llaves públicas</strong>!</p>
<p>La <strong>llave privada</strong> es el primer paso en la creación de una dirección en <strong>Bitcoin</strong>. Esta llave es simplemente un número aleatorio de 256 bits, generado de manera segura usando una fuente de entropía criptográfica.</p>
<p>A partir de la <strong>llave privada</strong> se genera la <strong>llave pública</strong>. Este proceso se hace utilizando una operación matemática que toma la <strong>llave privada</strong> y la transforma en una <strong>llave pública</strong> de 512 bits (64 bytes).</p>
<p>Estos conceptos no los veremos de manera técnica en este documento puesto que es solo para definiciones generales.</p>
<p>Ahora que ya sabemos lo que es una dirección (se obtiene de la <strong>llave pública</strong>) y que la necesitaremos para recibir <strong>bitcoin</strong> veamos cómo se genera esa dirección. Para ello vamos definir lo que es una <strong>wallet</strong>.</p>
<hr />
<h3 id="wallet">Wallet.</h3>
<p>Una <strong>wallet</strong> es una aplicación que entiende el protocolo de <strong>Bitcoin</strong>, es como un monedero físico en el mundo real, sin embargo, éste es virtual. Algunos consideran que en vez de llamarse monedero, tendría que llamarse <strong>llavero</strong> ya que no contiene monedas sino llaves. Esta aplicación es la que nos genera la dirección. Una wallet te genera un par de claves:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;"> <strong>Claves privadas</strong>: Permiten gastar los <strong>bitcoin</strong>.</span></li>
<li><span style="color: #9858b0;"> <strong>Claves públicas</strong>: Se derivan de las claves privadas como mencionamos anteriormente.</span></li>
</ul>
</blockquote>
<p>Ahora, ¿dónde obtenemos una walllet, monedero o llavero?</p>
<p>Este recurso es muy útil para comenzar a estudiar sobre <strong>Bitcoin</strong>, además tienen el apartado de <a href="https://bitcoin.org/es/elige-tu-monedero?step=1">monederos</a>.</p>
<hr />
<h3 id="tipos-de-wallets">Tipos de Wallets.</h3>
<p>Existen dos tipos importantes de wallets:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;"> <strong>Software</strong>: Se conectan a internet, así que la puedes descargar en el móvil o en el ordenador. </span></li>
<li><span style="color: #9858b0;"> <strong>Hardware</strong>: Se conoce como monedero frío y no se conecta a internet, sino que es un dispositivo que almacena todas las claves privadas, así que es ideal para almacenar <strong>bitcoin</strong>.</span></li>
</ul>
</blockquote>
<hr />
<h3 id="criptografia-asimetrica">Criptografía asimétrica.</h3>
<p>Arriba vimos los conceptos de llaves privadas y llaves públicas. <strong>Bitcoin</strong> utiliza criptografía de clave pública para la creación de llaves. Vamos a ver rápido como funciona. La criptografía de clave pública es un método para encriptar datos con dos claves diferentes relacionadas matemáticamente:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;"> <strong>La llave pública</strong> se deriva de la <strong>llave privada</strong> y está disponible para que cualquiera pueda utilizarla. De esta <strong>llave pública</strong> se obtiene la dirección de <strong>Bitcoin</strong>.</span></li>
</ul>
</blockquote>
<p>Debido al uso de dos claves en lugar de una, la criptografía de clave pública también se conoce como <strong>criptografía asimétrica</strong>.</p>
<p>El siguiente diagrama ejemplifica de manera sencilla como funciona la <strong>criptografía asimétrica</strong> con nuestros chicos favoritos.</p>
<p><img src="https://raw.githubusercontent.com/BlueeeMoon/bluemoon/master/static/images/criptografiaAsimetrica.jpeg" alt="criptografiaAsimetrica" /></p>
<p>En este <a href="https://cmapscloud.ihmc.us/rid=1SZ5JRZW9-2KTPSQ-1RF/PKC-resumen.pdf">enlace podrás saber más</a>.</p>
<hr />
<h3 id="funciones-hash">Funciones hash.</h3>
<p>Ya que hemos visto esto del par de llaves es importante comprender lo que es una función <strong>hash criptográfica</strong>. Esto es simplemente una función matemática que mediante un algoritmo al recibir datos de entrada te devuelve un rango de salida finito. Si tienes por ejemplo una obra completa de algún libro, al aplicarle este algoritmo criptográfico obtendrás una salida de tamaño fijo que representa esta obra completa de tu libro favorito quizás.</p>
<p>En una función hash la salida:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;"> No permite regresar a la entrada original, a esto se le llama <strong>unidireccional</strong>.</span></li>
<li><span style="color: #9858b0;"> No hay límite de entrada de datos, es decir, puedes ingresar una oración o una novela de mil páginas y siempre las salida será de tamaño fijo, esto dependerá de la función que uses, en este caso, será de 256 bits que es lo que se ocupa en <strong>Bitcoin</strong>, <strong>SHA256</strong>.</span></li>
<li><span style="color: #9858b0;"> Además si cambias culaquier dato de entrada la salida del hash será diferente, a esto se le llama <strong>dispersión</strong>.</span></li>
</ul>
</blockquote>
<p>El siguiente diagrama hace una pequeña representación de lo anterior.</p>
<p><img src="https://raw.githubusercontent.com/BlueeeMoon/bluemoon/master/static/images/funcionHash.jpeg" alt="funcionHash" /></p>
<p>Existen varios tipos de funciones hash, el que nos interesa es el <strong>SHA256</strong> que es el utilizado en <strong>Bitcoin</strong>. Si quieres saber más sobre él <a href="https://emn178.github.io/online-tools/sha256.html">aquí</a> hay un recurso muy lindo con el que puedes jugar.</p>
<p>El algoritmo <strong>SHA256</strong> se utiliza en <strong>Bitcoin</strong> para muchas cosas, entre ellas:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;"> <strong>Minado</strong>: es usado en el proceso de prueba de trabajo para encontrar un bloque válido.</span></li>
<li><span style="color: #9858b0;"> <strong>Transacciones</strong>: Se usa para la creación de direcciones, así como para firmar y verificar las transacciones.</span></li>
<li><span style="color: #9858b0;"> <strong>Integridad de la cadena</strong>: asegura la integridad de cada bloque mediante el cálculo de los hashes de los bloques anteriores.</span></li>
<li><span style="color: #9858b0;"> <strong>Árboles Merkle</strong>: permite calcular las raíces Merkle que garantizan que las transacciones no han sido alteradas.</span></li>
</ul>
</blockquote>
<p>Estos conceptos los veremos más adelante. Seguimos con la función <strong>hash</strong>.</p>
<hr />
<h3 id="firmas-digitales">Firmas digitales.</h3>
<p>Ahora que hemos visto un poco acerca de las funciones hash podemos pasar a ver lo que es una <strong>firma digital</strong>. En <strong>Bitcoin</strong> se utilizan las firmas digitales para comprobar la propiedad de los fondos. Una <strong>firma digital</strong> es como firmar un documento donde se esta verificando la autenticidad del firmante.</p>
<p>En la criptografía de <strong>clave asimétrica</strong> la firma digital funciona de la siguiente manera:</p>
<p><img src="https://raw.githubusercontent.com/BlueeeMoon/bluemoon/master/static/images/firmaDigital.jpeg" alt="firmaDigital" /></p>
<p>Aquí puedes saber <a href="https://bitcoin.org/files/bitcoin-paper/bitcoin_es.pdf">más</a> acerca de esto.</p>
<hr />
<h3 id="bloque">Bloque.</h3>
<p>Antes de comenzar a definir la cadena de bloques es necesario comprender que es un bloque en <strong>Bitcoin</strong>. Un bloque es una estructura de datos que contiene transacciones. Más adelante veremos que es una transacción. Las transacciones dentro de los bloques son validadas con funciones matemáticas que auntentican que el protocolo de <strong>Bitcoin</strong> sea correcto.</p>
<p>Una vez que estás transacciones son agregadas, el bloque se une a una cadena de bloques previos que de igual manera contienen las transacciones que se han hecho a lo largo de la historia de <strong>Bitcoin.</strong></p>
<p>Es importante mencionar que los bloques están encadenados por medio de un hash, este hash se obtiene al aplicarlo a esta estructura de datos. Cada bloque es referido por el bloque anterior en la cadena.</p>
<p>Si deseas profundizar en este <a href="https://github.com/bitcoinbook/bitcoinbook/blob/275c4eb8eab8800c6adc39f8def8e8f8fa356a57/ch11_blockchain.adoc#structure-of-a-block">enlace</a> podrás hacerlo.</p>
<hr />
<h3 id="bloque-genesis">Bloque génesis.</h3>
<p>Antes de comenzar con la definición de la cadena de bloques veamos lo que es el bloque génesis. El bloque génesis es el primer bloque del libro mayor, este bloque tiene una particularidad muy importante, está codificado estáticamente dentro del protocolo de <strong>Bitcoin</strong> Core, lo que significa que no puede ser modificado.</p>
<p>El bloque génesis no se generó mediante la minería como los otros bloques, veremos el concepto de minería en dos apartados más, sino que está hardcodeado en el código fuente de <strong>Bitcoin</strong>. Esto significa que sus datos (hash, transacciones, timestamp, etc.) están definidos directamente en el código de <strong>Bitcoin</strong> Core y no se obtienen de la red ni de una base de datos.</p>
<blockquote>
<p>"Cada nodo siempre conoce el hash y la estructura del bloque génesis, la fecha fija de su creación e incluso la transacción individual que contiene."
<strong>Mastering Bitcoin.</strong> Autor: <a href="https://github.com/bitcoinbook/bitcoinbook/blob/275c4eb8eab8800c6adc39f8def8e8f8fa356a57/ch11_blockchain.adoc#the-genesis-block">Andreas M. Antonopoulos, David A. Harding</a></p>
</blockquote>
<p>En resumen el bloque génesis es el ancla o el eslabón desde donde inica la cadena o el libro mayor.</p>
<h4 id="importancia-del-bloque-genesis">Importancia del bloque génesis:</h4>
<blockquote>
<ul>
<li><span style="color: #9858b0;">Es el punto de inicio inmutable de la cadena de bloques de Bitcoin.</span></li>
<li><span style="color: #9858b0;">Su codificación estática lo hace resistente a modificaciones malintencionadas.</span></li>
<li><span style="color: #9858b0;">Representa el nacimiento de Bitcoin y está ligado a la crisis financiera de 2008.</span></li>
<li><span style="color: #9858b0;">El bloque génesis no puede verlo nadie ya que los nodos no pueden llegar a él, si deseas verlo lo pudes hacer con su hash que es público.</span></li>
</ul>
</blockquote>
<p>Vamos ahora con la cadena de bloques.</p>
<hr />
<h3 id="cadena-de-bloques">Cadena de bloques.</h3>
<p>Ahora que ya vimos lo que es un bloque podemos comprender mejor la cadena de bloques. La cadena de bloques o el libro mayor, llamado así porque actúa como un registro contable que documenta todas las transacciones realizadas en la red de <strong>Bitcoin</strong>.</p>
<p>Este registro es público, es decir, todo el mundo puede verlo y como vimos en el apartado anterior los bloques están vinculados al anterior mediante un hash, formando una cadena, por eso el nombre de <strong>cadena de bloques</strong>.</p>
<hr />
<h3 id="bloque-huerfano">Bloque huérfano.</h3>
<p>Veamos rapido lo que es un <strong>bloque huérfano</strong> antes de pasar a lo siguiente pues es importante saber sobre él. También es conocido como bloque abandonado, es un bloque que ha sido minado correctamente pero no se encuentra en la cadena principal de bloques, cuando los mineros intentan resolver un bloque, y esto se da en muchas partes en todo el mundo, puede suceder que alguien resuelva primero el acertijo criptográfico. Estos bloques son válidos, pero debido a la naturaleza competitiva de la minería, solo uno de los bloques encontrados en el mismo tiempo puede ser parte de la cadena principal.</p>
<p>Aunque esto puede ser confuso ya que el bloque en realidad si tiene un padre como se muestra en esta imagen.</p>
<p>Para saber más de como están los bloques actualmente <a href="https://fork.observer/">aquí</a>.</p>
<p><img src="https://raw.githubusercontent.com/BlueeeMoon/bluemoon/master/static/images/huerfano.jpeg" alt="huerfano" /></p>
<hr />
<h3 id="mineria">Minería.</h3>
<p>Ahora que vimos lo que es un bloque, la cadena que se forma con estos bloques, y además vimos a grandes rasgos como están estructurados, podemos ver como se llenan con esta información y qué pruebas y procesos se hacen para validarla. Para ello es importante comprender que es la minería y cuál es su función dentro de <strong>Bitcoin</strong>.</p>
<p>Uno de los pilares más importantes dentro del protocolo de <strong>Bitcoin</strong> es la minería ya que con ella se alcanza el consenso descentralizado, no hay una autoridad central que regule esto, así que es fantástico.</p>
<p>Un minero en <strong>Bitcoin</strong> es un software que tiene como objetivo resolver un problema basado en un algoritmo hash criptográfico, ha esto se le llama PoW (Proof-Of-Work) por sus siglas en inglés, prueba de trabajo que veremos más adelante.</p>
<p>Cuando el minero ha resuelto el desafío, recibe una recompensa y el derecho a registrar las transacciones en la cadena de bloques, siendo esto la base del modelo de seguridad de <strong>Bitcoin</strong>.</p>
<p>Lo que hacen los mineros es recoger las transacciones que han sido previamente validadas en base al protocolo de <strong>Bitcoin</strong> por parte de los nodos, estás transacciones son obtenidas de un espacio de memoria llamado <strong>mempool</strong> que todos los nodos tienen y que previamente fueron transmitidas por la red. Una vez que eligen las transacciones de su propia mempool comienzan con el desafío mencionado anteriormente y si logran resolverlo estás transacciones quedan registradas en el bloque en curso, y el bloque es agregado al libro mayor, con ello el minero obteniene la recompensa de bloque y las tarifas que se pagaran por ellas.</p>
<p>La recompensa de bloque la veremos en el sigueinte punto, y posteriormente veremos acerca de las transacciones.</p>
<hr />
<h3 id="recompensa-de-bloque">Recompensa de bloque.</h3>
<p>La recompensa de bloque es un incentivo que reciben los mineros por realizar un esfuerzo computacional significativo. Este incentivo es <strong>bitcoin</strong> recien acuñado o monedas nuevas y las tarifas que se pagan por las transacciones.</p>
<p>Cada 210,000 bloques tras el bloque génesis la cantidad máxima de <strong>bitcoin</strong> nuevos disminuye, esto es aproximadamente cada cuatro años, definido en el mismo protocolo. Esto comenzó así.</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;"> 50 <strong>bitcoin</strong> por bloque en enero de 2009.</span></li>
<li><span style="color: #9858b0;"> 25 <strong>bitcoin</strong> por bloque, en noviembre de 2012.</span></li>
<li><span style="color: #9858b0;"> 12.5 <strong>bitcoin</strong> en julio de 2016.</span></li>
<li><span style="color: #9858b0;"> 6.25 <strong>bitcoin</strong> en mayo de 2020.</span></li>
</ul>
</blockquote>
<p>En base a lo anterior esto irá disminuyendo hasta aproximadamente el año 2140, lo que significa que ya no se emitirán nuevos <strong>bitcoin</strong>.</p>
<p>Además de obtener esta recompensa, los mineros obtienen tarifas de las transacciones, ya que estás puede incluir una comisión en forma de excedente de <strong>bitcoin</strong> entre las entradas y salidas. En el futuro cuando la recompensa disminuya las ganancias mineras provendrá de las comisiones.</p>
<hr />
<h3 id="prueba-de-trabajo">Prueba de trabajo.</h3>
<p>Existe un protocolo llamado PoW (Proof-Of-Work) por sus siglas en inglés, es utilizado en la minería de <strong>Bitcoin</strong>. Este protocolo se utiliza en redes distribuidas como <strong>Bitcoin</strong>. Se llama prueba de trabajo porque el protocolo requiere un esfuerzo computacional por parte del cliente, <strong>minero</strong>; es decir, implica la resolución de un problema criptográfico.</p>
<p>El protocolo define que los mineros deben ajustar un valor llamado <strong>nonce</strong> (lo veremos en el siguiente apartado) y calcular el hash del bloque con un algoritmo criptográfico específico, el <strong>SHA-256</strong> (Secure Hash Algorithm 256-bit) para hacer un hash valido que cumpla con ciertas condiciones establecidas por la dificultad de la red.</p>
<p>Este hash debe ser menor que un valor objetivo denominado <strong>objetivo de dificultad</strong> o <strong>target difficulty</strong> determinado por la dificultad en ese momento. Este campo numérico se usa como control para evitar que los datos sean manipulados.</p>
<p>Los mineros prueban diferentes valores de <strong>nonce</strong> hasta que el hash que generan sea menor que el valor objetivo. Este proceso es completamente aleatorio. Cuando un minero encuentra una solución válida, se transmite al resto de la red. El bloque propuesto se considera válido si cumple con los criterios del protocolo.</p>
<p>La dificultad del problema está ajustada de forma que, en promedio, los mineros tarden 10 minutos en encontrar una solución a este problema. Esto se ajusta cada <strong>2016 bloques</strong>, es decir, cada dos semanas, dependiendo de cuán rápido o lento sea el proceso de minería. Cuanto mayor sea la dificultad, más potencia computacional será necesaria para encontrar un hash válido.</p>
<blockquote>
<p><strong>Cynthia Dwork</strong> y <strong>Moni Naor</strong> propusieron la idea de <a href="https://www.geeksforgeeks.org/blockchain-proof-of-work-pow/">PoW</a> y más tarde <strong>Satoshi Nakamoto</strong> la aplicaron en el documento <strong>Bitcoin</strong> en 2008.</p>
</blockquote>
<p>Este diagrama explica como funciona.</p>
<p><img src="https://raw.githubusercontent.com/BlueeeMoon/bluemoon/master/static/images/pow.jpeg" alt="pow" /></p>
<hr />
<h3 id="nonce">Nonce</h3>
<p>Veamos lo que es el campo <strong>nonce</strong>. El nonce es un campo aleatorio utilizado <strong>una sola vez</strong> de 4 bytes (32 bits), lo que significa que puede contener valores enteros sin signo en el rango de 0 a 4,294,967,295 (que es 2^32−1).</p>
<p>Lo que querrá hacer el minero es añadir bloques de transacciones al libro mayor, como lo vimos en la PoW, para ello construyen el encabezado del bloque que básicamente es el resumen de todos los datos.</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">Versión.</span></li>
<li><span style="color: #9858b0;">Hash del bloque.</span></li>
<li><span style="color: #9858b0;">Raiz de Merkle.</span></li>
<li><span style="color: #9858b0;">Tiempo.</span></li>
<li><span style="color: #9858b0;">Bits.</span></li>
<li><span style="color: #9858b0;">Nonce.</span></li>
</ul>
</blockquote>
<p>Cuando los mineros construyen el encabezado del bloque el único dato que cambia es el nonce, esto para obtener un hash distinto con los mismos datos de entrada. El objetivo es encontrar el hash que empiece con cierta cantidad de ceros por debajo de un cierto valor, que lo vimos arriba.</p>
<p><strong>Nota</strong>: Con el incremento de la dificultad en la minería, los mineros también utilizan otros campos como: ExtraNonce que se encuentra dentro del scriptSig de la transacción coinbase para generar más combinaciones.</p>
<hr />
<h3 id="arbol-de-merkle-y-raiz-de-merkle">Árbol de Merkle y raíz de Merkle.</h3>
<p>Al parece ibamos a avanzar con el tema de las transacciones, pero seguramente te preguntaste acerca de la <strong>raíz de Merkle</strong> y del <strong>árbol de Merkle</strong>. Este concepto fue introducido por <a href="https://es.wikipedia.org/wiki/Ralph_Merkle">Ralph C. Merkle</a> y es una estructura de datos utilizada en criptografía y en sistemas de archivos distribuidos como <strong>Bitcoin.</strong></p>
<p>Primero veamos el <strong>Árbol de Merkle</strong>. Este describe una estructura de datos ramificados, generalmente se muestran al revés con la <strong>raíz</strong> en la parte superior y las <strong>hojas</strong> en la parte inferior, son binarios que contienen hashes criptográficos. Se usa para verificar la integridad y consistencia de grandes conjuntos de datos de manera eficiente.</p>
<p>La <strong>Raíz de Merkle</strong> es el hash final que se obtiene en la parte superior del <strong>árbol de Merkle</strong> después de calcular todos los hashes en los niveles inferiores. Es un identificador único de todo el conjunto de datos. Si un solo dato cambia, la raíz cambia, lo que permite verificar la integridad de los datos sin necesidad de almacenarlos todos.</p>
<p>Vamos con <strong>Bitcoin</strong>. Las transacciones en <strong>Bitcoin</strong> residen en el cuerpo de un bloque, lo cual forma un <strong>árbol de Merkle</strong>. Este árbol es una estructura binaria completa, interconectada por punteros hash. Ahora imagina un árbol, las hojas serían como los nodos de este árbol, y cada nodo padre surge de la combinación del hash <strong>SHA-256</strong> de sus dos nodos hijos.</p>
<p>Para ello, se realiza el hash de los nodos hijos y se concatenan los resultados obtenidos para calcular los nodos padres. Esta metodología se repite capa por capa de forma ascendente. Esta estructura de datos criptográfica reduce la necesidad de transmisión de datos y agiliza la complejidad computacional.</p>
<p>En la imagen de arriba se ven cuatro transacciones abajo, A,B,C y D que serían las hojas (nodos), en cada transacción se aplica un doble hash con el algoritmo <strong>SHA256</strong></p>
<p><code>Hash de Tx A = SHA256(SHA256(Tx A)).</code></p>
<p>En seguido los pares consecutivos de hojas se resumen en un nodo padre concatenando los dos hash y combinándolos.</p>
<p><code>Hash de TxA y Hash de TxB = SHA256(SHA256(HA + HB)).</code></p>
<p>Continuando el proceso hasta que solo exista un nodo en la parte superior (raiz) almacenandose en el encabezado del bloque un hash de 32 bytes. Así es como se resumen las transacciones.</p>
<p>El valor hash que resume todas las transacciones en la <strong>raíz de Merkle.</strong></p>
<p><img src="https://raw.githubusercontent.com/BlueeeMoon/bluemoon/master/static/images/raizMerkle.jpeg" alt="raizMerkle" /></p>
<hr />
<h3 id="objetivo-de-dificultad">Objetivo de dificultad</h3>
<p>No podemos dejar pasar este punto súper importante acerca de como se hace el ajuste de dificultad que vimos en el apartado de <strong>minería</strong>, más bien vamos definir como funciona esto.</p>
<p>Es un ajuste que se hace para regular la dificultad de la minería, con ello se asegura que los bloques se sigan minando aproximadamente cada 10 minutos. Se produce cada 2016 bloques (aproximadamente cada dos semanas), en función del tiempo que tardaron en minarse esos últimos 2016 bloques.</p>
<p>Para ello se utiliza un campo llamado <strong>target</strong> que es un número de 256 bits que define el valor máximo que puede tener un hash válido para que un bloque sea aceptado. Cuanto más bajo sea el target, más difícil es encontrar un hash menor que ese valor, y por lo tanto, mayor es la dificultad.</p>
<blockquote>
<p>Si la red está generando bloques en un periodo inferior a los diez minutos, la dificultad de minado aumenta y si por el contrario los bloques se están generando de manera más lenta, la dificultad de minado disminuye.</p>
</blockquote>
<p>Y luego lo más bonito, cuando se produce este ajuste, la reasignación de la dificultad se produce de forma automática y en cada nodo independientemente. Así que cada dos semanas ~ todos los nodos reorientan la dificultad de PoW.</p>
<p>En resumen.</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">El Target Adjustment (ajuste del objetivo) se refiere al cambio del target (objetivo de hash) de la prueba de trabajo <strong>PoW</strong>.</span></li>
<li><span style="color: #9858b0;">La dificultad es una forma de expresar este cambio de <strong>target</strong>.</span></li>
</ul>
</blockquote>
<hr />
<h3 id="hashrate">Hashrate.</h3>
<p>La tasa de hash es una métrica relacionada con el proceso de minar <strong>Bitcoin</strong>. Esta métrica representa la cantidad de procesos que un equipo puede realizar por segundo para resolver el rompecabezas criptográfico.</p>
<p>Si la tasa de hash es alta puede existir una mayor probabilidad de resolver el acertijo criptográfico, lo que aumenta las posibilidades del minero de recibir una compensación por procesar transacciones.</p>
<hr />
<h3 id="transacciones">Transacciones.</h3>
<p>Ahora si podemos pasar a las transacciones, una transacción es una estructura de datos que representa el movimiento de <strong>bitcoin</strong> de una dirección a otra dentro de la red. Técnicamente, una transacción es un conjunto de entradas y salidas, asegurado criptográficamente mediante firmas digitales y validado por los <strong>nodos</strong> de la red. Existe una base de datos en cada <strong>nodo completo</strong> de <strong>Bitcoin</strong> que nos dice quien controla cierta cantidad de <strong>bitcoin</strong>. Lo de los nodos lo veremos más adelante.</p>
<p>Las transacciones lo que hacen es desbloquear y bloquear <strong>bitcoin</strong> por medio de criptografía. Vamos a profundizar un poco más. Cuando se crea una transacción, es decir, cuando envias <strong>bitcoin</strong> a alguien, se crea una salida, esta salida contiene la llave <strong>pública</strong> que vimos en el apartado de criptografía, recordarás que la dirección contiene esta llave, y esta dirección fue creada por el emisor, así que cuando reciba los <strong>bitcoin</strong> los podrá desbloquear con su llave <strong>privada</strong> correspondiente a la clave <strong>pública</strong> creando una <strong>firma digital</strong>.</p>
<blockquote>
<p>No te preocupes de como se hace internamente puesto que esto lo hacen las wallets o los nodos si es que usarás o estás ejecutando ya uno.</p>
</blockquote>
<p><strong>Estructura de una transacción en Bitcoin.</strong></p>
<table><thead><tr><th>Campo</th><th>Tamaño (bytes)</th><th>Descripción</th></tr></thead><tbody>
<tr><td>Versión</td><td>4</td><td>Número de versión de la transacción.</td></tr>
<tr><td>Flag (opcional)</td><td>2</td><td>Solo en SegWit (0x0001)</td></tr>
<tr><td>Conteo de Entradas</td><td>1 - 9</td><td>Número de entradas (inputs) en la transacción, codificado en formato VarInt.</td></tr>
<tr><td>Entradas (Inputs)</td><td>Variable</td><td>Lista de entradas, cada una con los campos descritos a continuación.</td></tr>
<tr><td>Conteo de Salidas</td><td>1 - 9</td><td>Número de salidas (outputs) en la transacción, codificado en formato VarInt.</td></tr>
<tr><td>Salidas (Outputs)</td><td>Variable</td><td>Lista de salidas, cada una con los campos descritos a continuación.</td></tr>
<tr><td>Testigos (opcional)</td><td>Variable</td><td>Solo en SegWit, contiene firmas y pruebas de autenticidad</td></tr>
<tr><td>Locktime</td><td>4</td><td>Tiempo de bloqueo (opcional) que especifica cuándo puede ser añadida al bloque.</td></tr>
</tbody></table>
<p>Para que una transacción sea válida se debe cumplir con lo siguiente</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">Las firmas deben ser correctas.</span></li>
<li><span style="color: #9858b0;">No debe haber doble gasto.</span></li>
<li><span style="color: #9858b0;">Los BTC gastados deben ser menores o iguales a los disponibles.</span></li>
<li><span style="color: #9858b0;">La estructura de la transacción debe cumplir las reglas de consenso.</span></li>
</ul>
</blockquote>
<hr />
<h3 id="transaccion-coinbase">Transacción coinbase.</h3>
<p>En la parte de minería mencionamos algo acerca de la transacción <strong>coinbase</strong>. Esta transacción es la primera transacción en un bloque y es colocada por el minero cuando construye un bloque, cuando el incentivo por resolver el acertijo matemático se le otorque, será a esta transacción. Las salidas de esta transacción coinbase serán nuevos <strong>bitcoin</strong> recien acuñados.</p>
<p>Características de la Transacción Coinbase</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">Es la primera transacción en un bloque.</span></li>
<li><span style="color: #9858b0;">No tiene entradas válidas (no gasta UTXOs).</span></li>
<li><span style="color: #9858b0;">Genera nuevas monedas y recoge las tarifas de transacción.</span></li>
<li><span style="color: #9858b0;">El minero puede incluir datos arbitrarios en el campo de <strong>coinbase</strong>.</span></li>
</ul>
</blockquote>
<p>La cantidad de <strong>bitcoin</strong> en una coinbase transaction se calcula como.</p>
<p><code>Recompensa = Subsidio + Tarifas de Transacción.</code></p>
<p>Donde</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">Subsidio <strong>bitcoin</strong> nuevos generados (inicialmente 50 <strong>bitcoin</strong>, actualmente 6.25 <strong>bitcoin</strong>).</span></li>
<li><span style="color: #9858b0;">Tarifas Acumulación de las comisiones de todas las transacciones del bloque.</span></li>
</ul>
</blockquote>
<blockquote>
<p><strong>Satoshi Nakamoto</strong> incluyó este mensaje como crítica al sistema financiero tradicional. <strong>The Times 03/Jan/2009 Chancellor on brink of second bailout for banks</strong>.</p>
<p><strong>Bitcoin</strong> impone una regla para evitar problemas con los <strong>bloques huérfanos</strong> y asegurar que las recompensas de minería sean legítimas antes de gastarse. Deben transcurrir 100 bloques (~16.6 horas en promedio) antes de poder usar esos <strong>bitcoin</strong>.</p>
</blockquote>
<hr />
<h3 id="entradas-y-salidas">Entradas y salidas.</h3>
<p>Veamos ahora lo que son las <strong>entradas</strong> y las <strong>salidas</strong> de una transacción.</p>
<p>Cuando recibes <strong>bitcoin</strong> generas una dirección a donde los fondos te llegaran, en esa dirección es tu clave pública. Cuando quieras gastarlos, tendrás que desbloquearlos con tu <strong>clave privada</strong> firmándola. Así mismo la persona que te envia ese <strong>bitcoin</strong> desbloquerá los saldos que tiene con su llave privada. Este proceso es repetitivo cuando se crean transacciones, es decir, se generan entradas y salidas.</p>
<p>Lo veremos con Alicia y Bob como ejemplo para que quede más claro.</p>
<p>Alicia al recibir <strong>bitcoin</strong> tendrá una <strong>entrada</strong> y Bob al enviarlos tendrá una <strong>salida</strong>.</p>
<p>Las salidas están bloquedas con un <strong>scriptsig</strong> que veremos en el siguiente apartado, por ahora solo quedate con que es un script de código que sirve para verificar la firma de la persona que recibirá los <strong>bitcoin</strong>. Estás salidas contienen una cantidad de <strong>bitcoin</strong> especifica (imagina que es una moneda de $20) y un bloqueo.</p>
<p><strong>Nota</strong>: si esta salida contiene una cantidad exacta, y tienes que enviar una cantidad menor a la contenida, se crearán varias salidas, como si dieras la moneda de $20 y se te regresara cambio.</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">Cada <strong>entrada</strong> de una transacción refiere a un Unspent Transaction Output (UTXO) anterior. <a href="https://blueeemoon.github.io/bluemoon/bitcoin/utxo/">Aquí</a> hay una infografía por si quieres saber más.</span></li>
<li><span style="color: #9858b0;">Cada <strong>entrada</strong> tiene un scriptSig que incluye la firma del remitente o txinwitness en el caso de SegWit.</span></li>
<li><span style="color: #9858b0;">Cada <strong>salida</strong> especifica cuánto <strong>bitcoin</strong> se envía y a quién.</span></li>
<li><span style="color: #9858b0;">Cada <strong>salida</strong> tiene un scriptPubKey que especifica las condiciones para gastar los bitcoin.</span></li>
</ul>
</blockquote>
<hr />
<h3 id="bitcoin-script">Bitcoin Script.</h3>
<p><strong>Bitcoin</strong> utiliza un sistema de script (códigos), <a href="https://en.bitcoin.it/wiki/Script">Bitcoin Script</a> para las transacciones. Una moneda en <strong>Bitcoin</strong> está bloqueada con condiciones bajo las cuales se puede gastar. Las condiciones de bloqueo están codificadas con una clave ScriptPubKey. La prueba de desbloqueo está codificada en un scriptSig. Ambos forman un script completo y valido.</p>
<p>Cuando Bob desea gastar algunos <strong>bitcoin</strong>, debe proporcionar una transacción de <strong>entrada</strong> con un ScriptSig que incluye su firma y su clave pública. La red de <strong>Bitcoin</strong> combinará el ScriptSig de la <strong>entrada</strong> con el ScriptPubKey de la <strong>salida</strong> y ejecutará el script combinado para verificar la validez de la transacción.</p>
<p>Básicamente sería así:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">ScriptSig: script de desbloqueo, que requiere de una clave pública y una firma digital.</span></li>
<li><span style="color: #9858b0;">ScriptPubKey: script de bloqueo, que contiene un hash de clave pública, también denominada dirección.</span></li>
</ul>
</blockquote>
<hr />
<h3 id="tipos-de-transacciones">Tipos de Transacciones.</h3>
<p><strong>Bitcoin</strong> permite múltiples tipos de transacciones según el ScriptPubKey utilizado:</p>
<blockquote>
<ul>
<li><span style="color: #9858b0;">P2PKH (Pay-to-PubKey-Hash): Pago a una dirección estándar.</span></li>
<li><span style="color: #9858b0;">P2SH (Pay-to-Script-Hash): Para scripts más complejos (multisig, contratos).</span></li>
<li><span style="color: #9858b0;">SegWit (P2WPKH, P2WSH): Mejora la eficiencia y reduce fees.</span></li>
<li><span style="color: #9858b0;">Taproot (P2TR): Implementado en 2021 con Schnorr signatures.</span></li>
</ul>
</blockquote>
<p>Si quieres profundizar más sobre los tipos de transacciones en este <a href="https://ieeexplore.ieee.org/document/10477780">enlace</a> seguro aprenderás un montón.</p>
<hr />
<h4 id="gracias">Gracias.</h4>
<p><strong>Espero que esta información sea de utilidad.</strong></p>

    </div>
  </div>
</div>

  </div>
  
<script>
  function show_bib(bib_path) {
    $.ajax({
      url: bib_path,
      success: function (data) {
        $("#bibtex-content").text(data);
        $("#copyTarget").addClass("is-active");
      },
    });
  }

  document
    .getElementById("copyButton")
    .addEventListener("click", function () {
      var copyText = document.getElementById("bibtex-content");
      copyText.select();
      copyText.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(copyText.value);
      $("#copyTarget").removeClass("is-active");
    });
</script>

  


  
<script src="https://cdn.jsdelivr.net/npm/fullpage.js@3.1.2/dist/fullpage.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullpage.js@3.1.2/vendors/scrolloverflow.min.js"></script>
<script type="text/javascript">
    var fullpages = new fullpage('#fullpage', {
        menu: '#menu',
        setRecordHistory: false,
        anchors: [
             'anchor_about',         
             'anchor_bitcoin',       
             'anchor_lightning',     
             'anchor_recursos',      
             'anchor_publications',  
             'anchor_blog',          
        ],
        afterResize: function( width, height ){
		    if (width < 936) {
                fullpage_api.setAutoScrolling(false);
            } else {
                fullpage_api.setAutoScrolling(true);
            }
	    }
    });
    if (screen.width < 936){
        fullpages.setAutoScrolling(false);
    }

</script>

</body>

</html>